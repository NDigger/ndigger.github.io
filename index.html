<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Red+Hat+Display:ital,wght@0,300..900;1,300..900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.13.1/font/bootstrap-icons.min.css">
    <link rel="icon" id="page-icon" href="icon.svg" type="image/svg+xml">
    <link rel="stylesheet" href="styles.css">
    <title>my dream place</title>
</head>
<body>
    <div id="override"></div>
    <canvas id="glcanvas" width="1600" height="1080"></canvas>
    <script id="vs" type="x-shader/x-vertex">
        attribute vec2 a_position;
        varying vec2 v_uv;
        void main() {
        v_uv = (a_position + 1.0) * 0.5;
        gl_Position = vec4(a_position, 0.0, 1.0);
        }
    </script>
    <script id="fs" type="x-shader/x-fragment">
        precision highp float;
        varying vec2 v_uv;
        uniform float u_time;

        uniform vec2 u_resolution;
        uniform vec3 u_backgroundColor;
        uniform vec3 u_wavesColor;
        uniform vec3 u_secondaryWavesColor;
        uniform vec2 u_offset;

        const float t = 0.25;

        float random (in vec2 st) {
            return fract(sin(dot(st.xy,
                                vec2(12.9898,78.233)))*
                43758.5453123);
        }

        float drawStars(in vec2 st, in float speed) {
            float time = u_time * t * .5;
            vec2 fst = fract(st * 5. * speed + vec2(time, random(vec2(speed)) * 10.));
            vec2 ist = floor(st * 5. * speed + vec2(time, random(vec2(speed)) * 10.));
            return (1.-step(.5,distance(fst, vec2(.5) + random(ist) * .5) * 30. * (random(ist) + .5)))/float(speed) / 8. * (st.y * 2. - .1);
        }

        vec2 getCenterSquareResolution(in vec2 uv) {
            vec2 st = uv / u_resolution;
            st = (st - 0.5) * 2.0;
            float aspect = u_resolution.x / u_resolution.y;
            if (aspect > 1.0) { st.x *= aspect; } 
            else { st.y /= aspect; }
            return st * 0.5 + 0.5;
        }

        float easeOut(float t) {
            float v = clamp(t, 0., 1.);
            return 1.0 - pow((1.0 - v), 3.);
        }

        const float startDistance = 1.2;

        void main() {
            vec2 st = getCenterSquareResolution(v_uv * u_resolution);
            vec3 color = vec3(u_backgroundColor);
            float time = u_time * .2;

            st.y += startDistance;
            st.y -= easeOut(pow(u_time, .5) / 5.) * startDistance;
            st += u_offset;
            for (int i = 1; i < 6; i++) {
                color += vec3(drawStars(st, float(i)/2.));
            }
            
            vec2 nst = vec2(st.x + time, st.y);

            if (nst.y < sin(nst.x * 2.) * .1 + .2  
            || (nst.y < sin(nst.x * 2.) * .1 + .215 && nst.y > sin(nst.x * 2.) * .1 + .21 )
            ) {
                color = mix(u_wavesColor, u_secondaryWavesColor, nst.y * 2.3); // vec3(.9, .9, 1.) vec3(.9, 1., 1.)
            }

            
            //float ist = floor(nst.x);
            //float fst = fract(nst.x);
            //float ground = mix(random(vec2(ist)) * 3., random(vec2(ist + 1.)) * 3., smoothstep(0., 1., fst)) * .08;
            //if (nst.y < ground + .1 || (nst.y < ground + .115 && nst.y > ground + .11 )) {
            //    color = mix(u_wavesColor, u_secondaryWavesColor, nst.y * 2.3);
            //}    

            //vec2 mst = vec2(st.x + time / 25., st.y);
            //float moon = clamp(step(.98, 1.-length(mst - vec2(1.25, 0.9))) - step(.98, 1.-length(mst - vec2(1.255, 0.904))), 0., 1.);
            //color = mix(color, vec3(moon), moon);
            float distanceNightCircle = clamp(clamp(1.2-length(st - .5) * 0.9, 0., 1.) + u_backgroundColor.r, 0., 1.);
            
            gl_FragColor = vec4(color*distanceNightCircle,1.0);
        }
    </script>
    <section id="centered">
        <div id="main-window">
            <img id="music-illustration-btn" src="./images/musicIllustrationInactiveSleep.png" alt="illustration for window">
            <div class="window-panel">
                <p class="title"><span title="lovely">my dream place</span></p>
            </div>
            <div class="content">
                <h1 id="title">hi, i'm <span id="title-author">NDagger</span></h1>
                <div class="buttons">
                    <button id="about-me-btn" title="About me">
                        <!-- <i class="bi bi-text-center"></i> -->
                        <i class="bi bi-info-square"></i>
                        <p>About me</p>
                    </button>
                    <button id="skills-btn" title="Skills">
                        <i class="bi bi-tools"></i>
                        <p>Skills</p>
                    </button>
                    <button id="creation-btn" title="Creation">
                        <i class="bi bi-tag"></i>
                        <p>Creation</p>
                    </button>
                    <!-- <button id="rest-btn" title="Creation">
                        <i class="bi bi-joystick"></i>
                        <p>Rest</p>
                    </button>
                    <button id="faq-btn" title="Not Frequently Asked Questions">
                        <i class="bi bi-question-lg"></i>
                        <p>NFAQ</p>
                    </button> -->
                    <button id="status-btn" title="Statuses">
                        <!-- <i class="bi bi-list"></i> -->
                        <i class="bi bi-clock-fill"></i>
                        <p>Statuses</p>
                    </button>
                </div>
            </div>
        </div>
    </section>
    <section id="quick-links">
        <button title="My Discord" aria-label="discord" id="discord-btn" class="copyable"><i class="bi bi-discord"></i></button>
        <button title="My YouTube" aria-label="youtube" id="youtube-btn"><i class="bi bi-youtube"></i><a href="https://www.youtube.com/@scout1495" target="_blank" title="My YouTube"></a></button>
        <button title="My GitHub" aria-label="github" id="github-btn"><i class="bi bi-github"></i><a href="https://github.com/NDigger" target="_blank" title="My GitHub"></a></button>
    </section>
    <button id="music-btn"><i class="bi bi-music-note-beamed"></i></button>
    <button id="night-mode-btn" class="night-mode-btn-animation"><i class="bi bi-moon-fill night-mode-btn-animation"></i></button>
    <button id="sound-btn" class="night-mode-btn-animation"><i class="bi bi-music-note night-mode-btn-animation"></i></button>
    <script src="script.js" type="module"></script>
    <script src="canvas.js"></script>
</body>
</html>